(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[25],{1098:function(e,t,n){"use strict";n.r(t);var a=n(653),r=n(1),c=n(21),s=n(647),i=n(646),o=n(654),l=n.n(o),u=n(1102),j=n(1101),d=n(22);t.default=function(){Object(c.g)();var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],o=t[1],b=Object(r.useState)(1),m=Object(a.a)(b,2),O=m[0],f=m[1],h=Object(r.useState)(""),x=Object(a.a)(h,2),p=x[0],y=x[1],S=Object(r.useState)(!1),g=Object(a.a)(S,2),v=g[0],N=g[1],F=Object(r.useState)(""),I=Object(a.a)(F,2),k=I[0],E=I[1],C=Object(r.useState)(""),U=Object(a.a)(C,2),A=U[0],T=U[1],w=Object(r.useState)(""),G=Object(a.a)(w,2),P=G[0],B=G[1],D=Object(r.useState)(""),z=Object(a.a)(D,2),L=z[0],$=z[1],q=Object(r.useState)(""),J=Object(a.a)(q,2),R=J[0],K=J[1],M=Object(r.useState)(!1),H=Object(a.a)(M,2),Q=H[0],V=H[1],W=Object(r.useState)(""),X=Object(a.a)(W,2),Y=X[0],Z=X[1],_=Object(r.useState)(""),ee=Object(a.a)(_,2),te=(ee[0],ee[1]),ne=Object(r.useState)(!1),ae=Object(a.a)(ne,2),re=ae[0],ce=ae[1],se=Object(r.useState)(!1),ie=Object(a.a)(se,2),oe=ie[0],le=ie[1],ue=Object(r.useState)(!1),je=Object(a.a)(ue,2),de=je[0],be=je[1],me=Object(r.useState)(""),Oe=Object(a.a)(me,2),fe=Oe[0],he=Oe[1],xe=Object(r.useState)(""),pe=Object(a.a)(xe,2),ye=pe[0],Se=pe[1],ge=Object(r.useState)(""),ve=Object(a.a)(ge,2),Ne=ve[0],Fe=ve[1],Ie=function(e){switch(e){case"COMPLETED":return"success";case"FAILED":return"secondary";case"Pending":return"warning";case"FAILED":return"danger";default:return"primary"}};Object(r.useEffect)((function(){ke()}),[]);var ke=function(){l.a.get("".concat(i.a.baseUrl,"/api/v1/admin/transactions/proxy-transfer?pageNumber=1&pageSize=10"),{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}).then((function(e){200===e.status&&o(e.data.records.map((function(e){return{reference:e.reference,startDate:e.createdOn?e.createdOn.slice(0,10):"",amount:"NGN"===e.currency?"N"+Intl.NumberFormat("en-US").format(e.amount):"$"+Intl.NumberFormat("en-US").format(e.amount),transactionStatus:e.transactionStatus,senderEmail:e.sender.emailAddress,proxyInitiator:e.proxyInitiator,beneficiaryEmail:e.beneficiary.emailAddress,senderFee:"NGN"===e.currency?"N"+Intl.NumberFormat("en-US").format(e.senderFee):"$"+Intl.NumberFormat("en-US").format(e.senderFee)}})))})).catch((function(e){}))};return Object(d.jsxs)(s.J,{children:[Object(d.jsxs)(s.m,{children:[re&&Object(d.jsx)(s.a,{color:"success",children:Y}),oe&&Object(d.jsx)(s.a,{color:"danger",children:Y}),Object(d.jsxs)(s.h,{children:[Object(d.jsx)(s.l,{children:Object(d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(d.jsx)("div",{children:"Proxy Transfer"}),Object(d.jsx)("button",{type:"button",class:"btn btn-primary mr-2",onClick:function(){N(!0)},children:"Initiate Transfer"})]})}),"          ",Object(d.jsxs)(s.i,{children:[Object(d.jsx)(s.p,{items:n,fields:[{key:"reference",name:"Reference"},{key:"startDate",name:" Date"},{key:"senderEmail",name:"Sender Email"},{key:"beneficiaryEmail",name:"Beneficiary Email"},{key:"amount",name:"Amount"},{key:"senderFee",name:"Sender Fee"},{key:"proxyInitiator",name:"Proxy Initiator"},{key:"transactionStatus",name:"Transaction Status"}],hover:!0,striped:!0,itemsPerPage:5,activePage:O,scopedSlots:{transactionStatus:function(e){return Object(d.jsx)("td",{children:Object(d.jsx)(s.b,{color:Ie(e.transactionStatus),children:e.transactionStatus})})}},clickableRows:!0}),Object(d.jsx)("div",{className:"text-center pagination-part",children:Object(d.jsx)(u.a,{current:O,total:p,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},defaultPageSize:10,onChange:function(e,t){console.log(e),f(e),function(e){l.a.get("".concat(i.a.baseUrl,"/api/v1/admin/transactions/proxy-transfer?").concat(e),{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}).then((function(e){200===e.status&&(y(10*e.data.totalPages),o(e.data.records.map((function(e){return{reference:e.reference,startDate:e.createdOn?e.createdOn.slice(0,10):"",amount:"NGN"===e.currency?"N"+Intl.NumberFormat("en-US").format(e.amount):"$"+Intl.NumberFormat("en-US").format(e.amount),transactionStatus:e.transactionStatus,senderEmail:e.sender.emailAddress,proxyInitiator:e.proxyInitiator,beneficiaryEmail:e.beneficiary.emailAddress,senderFee:"NGN"===e.currency?"N"+Intl.NumberFormat("en-US").format(e.senderFee):"$"+Intl.NumberFormat("en-US").format(e.senderFee)}}))))})).catch((function(e){}))}("pageNumber=".concat(e,"&pageSize=10"))}})})]})]})]}),Object(d.jsx)(j.a,{title:"Initiate Transfer",visible:v,footer:null,maskClosable:!1,onCancel:function(){N(!1),$(""),B(""),K(""),T(""),E("")},children:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(s.x,{children:[Object(d.jsx)(s.G,{htmlFor:"name",children:"Currency"}),Object(d.jsxs)(s.K,{custom:!0,name:"ccmonth",id:"ccmonth",onChange:function(e){return $(e.target.value)},value:L,children:[Object(d.jsx)("option",{selected:!0,children:"Select"}),Object(d.jsx)("option",{selected:!0,children:"NGN"}),Object(d.jsx)("option",{selected:!0,children:"USD"})]})," "]}),Object(d.jsxs)(s.x,{children:[Object(d.jsx)(s.G,{htmlFor:"name",children:"Sender Email"}),Object(d.jsx)(s.B,{id:"name",type:"text",required:!0,onChange:function(e){return E(e.target.value)},value:k})]}),Object(d.jsxs)(s.x,{children:[Object(d.jsx)(s.G,{htmlFor:"name",children:"Beneficiary Email"}),Object(d.jsx)(s.B,{id:"name",type:"text",required:!0,onChange:function(e){return T(e.target.value)},value:A})]}),Object(d.jsxs)(s.x,{children:[Object(d.jsx)(s.G,{htmlFor:"name",children:"Amount"}),Object(d.jsx)(s.B,{id:"name",type:"number",required:!0,onChange:function(e){return B(e.target.value)},value:P})]}),Object(d.jsxs)(s.x,{children:[Object(d.jsx)(s.G,{htmlFor:"name",children:"Reason"}),Object(d.jsx)(s.T,{id:"name",type:"number",required:!0,onChange:function(e){return K(e.target.value)},value:R})]}),Object(d.jsx)("div",{className:"d-flex justify-content-end",children:Object(d.jsx)("button",{type:"button",class:"btn btn-primary mr-2",onClick:function(){k&&A&&P&&R&&L&&(V(!0),l.a.post("".concat(i.a.baseUrl,"/api/v1/admin/proxy-transfer/fee"),{amount:P,currency:L},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}).then((function(e){200===e.status&&(he(P),Se(e.data.fee),V(!1),be(!0),N(!1),Fe(e.data.fee+parseInt(P)))})).catch((function(e){V(!1),void 0!==e.response?(Z(e.response.data.message),le(!0),ce(!1),setTimeout((function(){Z(""),le(!1)}),2500)):(Z("Connection Error"),le(!0),ce(!1))})))},children:Q?Object(d.jsx)("div",{class:"spinner-border",role:"status",style:{width:"1rem",height:"1rem"},children:Object(d.jsx)("span",{class:"sr-only",children:"Loading..."})}):"Submit"})})]})}),Object(d.jsxs)(j.a,{title:"Fee Info",visible:de,footer:null,maskClosable:!1,onCancel:function(){be(!1)},children:[Object(d.jsx)("h4",{children:"Fee Info"}),Object(d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(d.jsx)("div",{children:"Amount"}),Object(d.jsx)("div",{children:fe})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(d.jsx)("div",{children:"Fee"}),Object(d.jsx)("div",{children:ye})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(d.jsx)("div",{children:"Total"}),Object(d.jsxs)("div",{children:[" ","USD"===L?"$":"\u20a6",Intl.NumberFormat("en-US").format(Ne)]})]}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{className:"d-flex justify-content-end",children:Object(d.jsx)("button",{type:"button",class:"btn btn-primary mr-2",onClick:function(){k&&A&&P&&R&&L?(V(!0),he(P),l.a.post("".concat(i.a.baseUrl,"/api/v1/admin/proxy-transfer/initiate\n  "),{senderEmail:k,beneficiaryEmail:A,amount:P,fee:ye,currency:L,reason:R},{headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}).then((function(e){V(!1),200===e.status&&(ce(!0),$(""),B(""),K(""),T(""),E(""),be(!1),Z("Proxy Transfer Initiated Successfully"),setTimeout((function(){Z(""),N(!1),ce(!1)}),2500),ke())})).catch((function(e){V(!1),void 0!==e.response?(Z(e.response.data.message),le(!0),ce(!1),setTimeout((function(){Z(""),le(!1)}),2500)):(Z("Connection Error"),le(!0),ce(!1))}))):(te(!0),setTimeout((function(){te(!1)}),2500))},children:Q?Object(d.jsx)("div",{class:"spinner-border",role:"status",style:{width:"1rem",height:"1rem"},children:Object(d.jsx)("span",{class:"sr-only",children:"Loading..."})}):"Submit"})})]})]})}},646:function(e,t,n){"use strict";t.a={baseUrl:"https://core.4traderx.com"},console.log("https://core.4traderx.com")}}]);
//# sourceMappingURL=25.c54ce953.chunk.js.map